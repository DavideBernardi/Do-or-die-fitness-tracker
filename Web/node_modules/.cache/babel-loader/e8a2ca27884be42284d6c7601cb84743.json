{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chrib\\\\Dropbox\\\\Studium\\\\5. Bristol\\\\8.Software_Eng\\\\Github\\\\now-ui-kit-react-master\\\\src\\\\views\\\\examples\\\\MQTTclient.js\";\n// Create a client instance, we create a random id so the broker will allow multiple sessions\nimport React from \"react\"; // import jQuery from 'jquery';\n\nimport Paho from 'paho-mqtt';\nimport { Redirect } from \"react-router-dom\";\nimport { Button, Input, InputGroupAddon, InputGroupText, InputGroup, Col, Row } from \"reactstrap\";\n\nclass Mqtt extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mqttConnected: false,\n      //new challenge page\n      challenge_id: '',\n      challenge_name: '',\n      challenge_description: '',\n      challenge_step_goal: '',\n      challenge_end_date: '20-03-31',\n      challenge_reward: '',\n      challenge_array: [],\n      //login/signup page\n      login_username: '',\n      redirect: false,\n      //ProfilePage\n      total_steps: 0,\n      remaining_sec: 0,\n      ranking: 8364,\n      dummy_counter: 0 // used to calculate a dummy ranking\n\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.pushNewChallenge = this.pushNewChallenge.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  componentDidMount() {\n    this.client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + this.makeid(3));\n    this.client.connect({\n      onSuccess: this.onConnect.bind(this)\n    });\n    this.client.onConnectionLost = this.onConnectionLost;\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  render() {\n    if (this.props.type === \"login\") {\n      return this.renderLogin();\n    }\n\n    if (this.props.type === \"sign-up\") {\n      return this.rendersignup();\n    }\n\n    if (this.props.type === \"profile\") {\n      return this.renderProfile();\n    }\n\n    if (this.props.type === \"challenges\") {\n      return this.renderGetChallenges();\n    }\n\n    if (this.props.type === \"set-challenge\") {\n      return this.renderSetChallenge();\n    }\n  }\n\n  renderProfile() {\n    if (this.state.mqttConnected === true) {\n      this.requestProfile();\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Your Stats\"), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"social-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.total_steps), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Steps\")), React.createElement(\"div\", {\n      className: \"social-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.state.remaining_sec), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Seconds Lifetime\")), React.createElement(\"div\", {\n      className: \"social-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"#\", this.state.ranking), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Ranking\"))), React.createElement(\"h3\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"About me\"), React.createElement(\"h5\", {\n      className: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"I only take credit bets with rankers in the top 1000, if you're not in that group, don't @ me. First user to reach 10,000km walked within a month, and only user to ever hold the #1 spot in the leaderboards. Also I'm F2P.\"), React.createElement(\"h3\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Ongoing Challenges\"), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"A Mile A Day\"), \"  \", React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/walkicon1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"1.6km\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), \"14hr50m\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Never Stop\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/shoewalk1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"\\u221Ekm\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), \"1hr\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Group Walking\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/groupwalk1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"20km\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), \"6d10hr25m\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Run From Life\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/run1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"100km\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), \"8hr17m\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })))), React.createElement(\"h3\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Achievements\"), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Extreme Strider\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/tired1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Close Call\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/neardeath1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Champion\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/winicon1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"In The Red\"), React.createElement(\"img\", {\n      alt: \"...\",\n      className: \"img-raised\",\n      src: require(\"assets/img/death1.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }))));\n  }\n\n  requestProfile() {\n    if (this.state.total_steps !== 0) {\n      this.wait(1000);\n    }\n\n    console.log(\"Requesting profile...\");\n    var newRequest = {\n      type: \"pull profile\",\n      user_name: global.userName\n    };\n    this.requestToServer(JSON.stringify(newRequest));\n  }\n\n  rendersignup() {\n    return React.createElement(Col, {\n      className: \"text-center ml-auto mr-auto\",\n      lg: \"6\",\n      md: \"8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(InputGroupAddon, {\n      addonType: \"prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(InputGroupText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"now-ui-icons users_circle-08\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }))), React.createElement(Input, {\n      placeholder: \"User Name...\",\n      type: \"text\",\n      value: this.state.login_username,\n      onChange: event => this.loginChange('login_username', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"send-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, this.redirectToProfile(), React.createElement(Button, {\n      block: true,\n      className: \"btn-round\",\n      color: \"info\",\n      size: \"lg\",\n      onClick: this.handleLogin.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Sign up now\"), React.createElement(\"div\", {\n      className: \"pull-middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"link\",\n      href: \"/login-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Login to existing Account\")))));\n  }\n\n  redirectToProfile() {\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: {\n          pathname: '/profile-page'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      });\n    }\n  }\n\n  handleLogin() {\n    this.setState({\n      redirect: true\n    });\n  }\n\n  loginChange(type, event) {\n    this.setState({\n      [type]: event.target.value\n    });\n    global.userName = event.target.value;\n  }\n\n  handleChange(type, event) {\n    this.setState({\n      [type]: event.target.value\n    });\n  }\n\n  renderLogin() {\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(InputGroupAddon, {\n      addonType: \"prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(InputGroupText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"now-ui-icons users_circle-08\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }))), React.createElement(Input, {\n      placeholder: \"User Name...\",\n      type: \"text\",\n      value: this.state.login_username,\n      onChange: event => this.loginChange('login_username', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    })), React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(InputGroupAddon, {\n      addonType: \"prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(InputGroupText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"now-ui-icons text_caps-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }))), React.createElement(Input, {\n      placeholder: \"Password...\",\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    })), this.redirectToProfile(), React.createElement(Button, {\n      block: true,\n      className: \"btn-round\",\n      color: \"info\",\n      onClick: this.handleLogin.bind(this),\n      size: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"    Login\"));\n  }\n\n  requestChallenges() {\n    console.log(\"Requesting challenges...\");\n    var newRequest1 = {\n      type: \"pull all challenges\"\n    };\n    this.requestToServer(JSON.stringify(newRequest1));\n  }\n\n  renderGetChallenges() {\n    if (this.state.mqttConnected === true) {\n      this.requestChallenges();\n    }\n\n    if (this.state.challenge_array.length === 0) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \" \", React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \" Loading challenges... \"), \" \");\n    } else {\n      return React.createElement(React.Fragment, {\n        key: listitem.challenge_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        align: \"middle\",\n        class: \"tg-wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        id: \"tg-VvxLO\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Step Goal\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, \"End Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"Reward\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      })), this.state.challenge_array.map(listitem => React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, listitem.challenge_name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, listitem.description), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, listitem.step_goal), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, listitem.end_time), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, listitem.reward), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"submit-button\",\n        value: listitem.challenge_id,\n        onClick: event => this.pushSelectedChallenge(event, listitem.challenge_id).bind(this),\n        variant: \"outlined\",\n        size: \"large\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"Accept Challenge\")))))));\n    }\n  }\n\n  pushSelectedChallenge(event, id) {\n    var selectedChallenge = {\n      type: \"push select challenge\",\n      user_name: global.userName,\n      challenge_id: id\n    };\n    this.requestToServer(JSON.stringify(selectedChallenge));\n    alert(\"You successfully joined this challenge\");\n  }\n\n  renderSetChallenge() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      align: \"left\",\n      onSubmit: this.validateChallengeInput.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"Challenge Name:  \"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.challenge_name,\n      onChange: event => this.handleChange('challenge_name', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"Description:  \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"challenge-textfield\",\n      value: this.state.challenge_description,\n      onChange: event => this.handleChange('challenge_description', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, \"End Date: \"), React.createElement(\"input\", {\n      type: \"date\",\n      value: this.state.challenge_end_date,\n      onChange: event => this.handleChange('challenge_end_date', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, \"Step Goal: \"), React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.challenge_step_goal,\n      onChange: event => this.handleChange('challenge_step_goal', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"User Reward: \"), React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.challenge_reward,\n      onChange: event => this.handleChange('challenge_reward', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"submit-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, \"Create Challenge\")));\n  }\n\n  validateChallengeInput(event) {\n    event.preventDefault();\n\n    if (this.state.challenge_name === '' || this.state.challenge_description === '' || this.state.challenge_reward === '' || this.state.challenge_step_goal === '') {\n      alert(\"Please complete all fields\");\n    } else if (this.state.challenge_reward >= 0 && this.state.challenge_step_goal >= 0) {\n      this.pushNewChallenge(event);\n    } else {\n      alert(\"Please enter positive numbers\");\n    }\n  }\n\n  pushNewChallenge(event) {\n    console.log(JSON.stringify(this.state.challenge_name));\n    console.log(\"Pushing New Challenge\");\n    var today = new Date(),\n        date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + 'T' + today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds() + '.' + today.getMilliseconds() + 'Z';\n    var newChallenge = {\n      type: \"push new challenge\",\n      challenge_id: \"C\" + this.makeid(6),\n      challenge_name: this.state.challenge_name,\n      description: this.state.challenge_description,\n      end_time: this.state.challenge_end_date,\n      step_goal: this.state.challenge_step_goal,\n      reward: this.state.challenge_reward,\n      current_time: date\n    };\n    this.requestToServer(JSON.stringify(newChallenge));\n    alert(\"You successfully created a new challenge\");\n  } // called when the client connects\n\n\n  onConnect() {\n    // Once a connection has been made report.\n    console.log(\"Connected\");\n    this.setState({\n      mqttConnected: true\n    }); // this.state.mqttConnected = true;\n  } // called when the client connects\n\n\n  requestToServer(payload) {\n    // Once a connection has been made, make a subscription and send a message.\n    console.log(\"Request to server\");\n    this.client.subscribe(\"doordie_web\");\n    var message = new Paho.Message(payload);\n    message.destinationName = \"doordie_web\";\n    this.client.send(message);\n  } // called to generate the IDs\n\n\n  makeid(length) {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  } // called when the client loses its connection\n\n\n  onConnectionLost(responseObject) {\n    if (responseObject.errorCode !== 0) {\n      console.log(\"Mqtt.onConnectionLost:\" + responseObject.errorMessage);\n    }\n  } // called when a message arrives\n\n\n  onMessageArrived(message) {\n    console.log(\"Mgtt.onMessageArrived:\" + message.payloadString);\n    var json_message = JSON.parse(message.payloadString);\n\n    if (json_message.type === 'push all challenges') {\n      console.log(\"attempt to get array\");\n      this.setState({\n        challenge_array: json_message.challenge\n      });\n    }\n\n    if (json_message.type === 'push profile' && json_message.user_name === global.userName) {\n      console.log(\"HELLLO\");\n      this.setState({\n        total_steps: json_message.total_steps,\n        remaining_sec: json_message.remaining_sec,\n        ranking: Math.max(1, Math.round(8378 - json_message.total_steps + this.state.dummy_counter / 3, 0)),\n        //dummy formula: so that it looks like your ranking changes when the step count goes up\n        dummy_counter: this.state.dummy_counter + 1\n      });\n    }\n  } //wait function called after sever request, to avoid spaming the server\n\n\n  wait(ms) {\n    var start = new Date().getTime();\n    var end = start;\n\n    while (end < start + ms) {\n      end = new Date().getTime();\n    }\n  }\n\n}\n\nexport default Mqtt;","map":{"version":3,"sources":["C:/Users/chrib/Dropbox/Studium/5. Bristol/8.Software_Eng/Github/now-ui-kit-react-master/src/views/examples/MQTTclient.js"],"names":["React","Paho","Redirect","Button","Input","InputGroupAddon","InputGroupText","InputGroup","Col","Row","Mqtt","Component","constructor","props","state","mqttConnected","challenge_id","challenge_name","challenge_description","challenge_step_goal","challenge_end_date","challenge_reward","challenge_array","login_username","redirect","total_steps","remaining_sec","ranking","dummy_counter","handleChange","bind","pushNewChallenge","onMessageArrived","componentDidMount","client","Client","makeid","connect","onSuccess","onConnect","onConnectionLost","render","type","renderLogin","rendersignup","renderProfile","renderGetChallenges","renderSetChallenge","requestProfile","require","wait","console","log","newRequest","user_name","global","userName","requestToServer","JSON","stringify","event","loginChange","redirectToProfile","handleLogin","pathname","setState","target","value","requestChallenges","newRequest1","length","listitem","map","description","step_goal","end_time","reward","pushSelectedChallenge","id","selectedChallenge","alert","validateChallengeInput","preventDefault","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","newChallenge","current_time","payload","subscribe","message","Message","destinationName","send","result","characters","charactersLength","i","charAt","Math","floor","random","responseObject","errorCode","errorMessage","payloadString","json_message","parse","challenge","max","round","ms","start","getTime","end"],"mappings":"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","sourcesContent":["// Create a client instance, we create a random id so the broker will allow multiple sessions\r\nimport React from \"react\";\r\n// import jQuery from 'jquery';\r\nimport Paho from 'paho-mqtt';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\nimport {\r\n  Button,\r\n  Input,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  InputGroup,\r\n  Col,\r\n  Row,\r\n} from \"reactstrap\";\r\n\r\nclass Mqtt extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n        mqttConnected: false,\r\n      //new challenge page\r\n        challenge_id: '',\r\n        challenge_name: '',\r\n        challenge_description: '',\r\n        challenge_step_goal: '',\r\n        challenge_end_date: '20-03-31',\r\n        challenge_reward: '',\r\n        challenge_array: [],\r\n      //login/signup page\r\n        login_username: '',\r\n        redirect: false,\r\n      //ProfilePage\r\n        total_steps: 0,\r\n        remaining_sec: 0,\r\n        ranking: 8364,\r\n        dummy_counter: 0, // used to calculate a dummy ranking\r\n\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.pushNewChallenge = this.pushNewChallenge.bind(this);\r\n    this.onMessageArrived = this.onMessageArrived.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + this.makeid(3) );\r\n    this.client.connect({onSuccess: this.onConnect.bind(this)});\r\n    this.client.onConnectionLost = this.onConnectionLost;\r\n    this.client.onMessageArrived = this.onMessageArrived;\r\n  }\r\n\r\n  render(){\r\n      if(this.props.type === \"login\"){\r\n        return(this.renderLogin())\r\n      }\r\n      if(this.props.type === \"sign-up\"){\r\n        return(this.rendersignup())\r\n      }\r\n      if(this.props.type === \"profile\"){\r\n        return(this.renderProfile())\r\n      }\r\n      if(this.props.type === \"challenges\"){\r\n        return(this.renderGetChallenges())\r\n      }\r\n      if(this.props.type === \"set-challenge\"){\r\n        return(this.renderSetChallenge())\r\n      }\r\n  }\r\n\r\nrenderProfile(){\r\n  if (this.state.mqttConnected === true){\r\n    this.requestProfile();\r\n  }\r\n  return(\r\n    <div>\r\n    <p className=\"category\">Your Stats</p>\r\n    <div className=\"content\">\r\n      <div className=\"social-description\">\r\n        <h2>{this.state.total_steps}</h2>\r\n        <p>Steps</p>\r\n      </div>\r\n      <div className=\"social-description\">\r\n        <h2>{this.state.remaining_sec}</h2>\r\n        <p>Seconds Lifetime</p>\r\n      </div>\r\n      <div className=\"social-description\">\r\n        <h2>#{this.state.ranking}</h2>\r\n        <p>Ranking</p>\r\n      </div>\r\n    </div>\r\n    <h3 className=\"title\">About me</h3>\r\n    <h5 className=\"description\">\r\n      I only take credit bets with rankers in the top 1000, if you're\r\n      not in that group, don't @ me. First user to reach 10,000km walked\r\n      within a month, and only user to ever hold the #1 spot in the\r\n      leaderboards. Also I'm F2P.\r\n    </h5>\r\n      <h3 className=\"title\">Ongoing Challenges</h3>\r\n        <Row>\r\n          <Col>\r\n              <p>A Mile A Day</p>  <img  alt=\"...\"  className=\"img-raised\"  src={require(\"assets/img/walkicon1.png\")} ></img>\r\n              <p>1.6km<br/>\r\n              14hr50m<br/><br/></p>\r\n              <p>Never Stop</p>\r\n              <img alt=\"...\"  className=\"img-raised\" src={require(\"assets/img/shoewalk1.png\")} ></img>\r\n              <p>&infin;km<br/>\r\n              1hr<br/><br/></p>\r\n          </Col>\r\n          <Col>\r\n              <p>Group Walking</p>\r\n              <img  alt=\"...\"  className=\"img-raised\"  src={require(\"assets/img/groupwalk1.png\")} ></img>\r\n              <p>20km<br/>\r\n              6d10hr25m<br/><br/></p>\r\n              <p>Run From Life</p>\r\n              <img\r\n                                alt=\"...\"\r\n                                className=\"img-raised\"\r\n                                src={require(\"assets/img/run1.png\")}\r\n                              ></img>\r\n              <p>100km<br/>\r\n              8hr17m<br/><br/></p>\r\n                            </Col>\r\n              </Row>\r\n              <h3 className=\"title\">Achievements</h3>\r\n                  <Row>\r\n                            <Col>\r\n              <p>Extreme Strider</p>\r\n                <img\r\n                  alt=\"...\"\r\n                  className=\"img-raised\"\r\n                  src={require(\"assets/img/tired1.png\")}\r\n                ></img><br/><br/><br/><br/>\r\n<p>Close Call</p>\r\n                <img\r\n                  alt=\"...\"\r\n                  className=\"img-raised\"\r\n                  src={require(\"assets/img/neardeath1.png\")}\r\n                ></img><br/><br/><br/><br/>\r\n              </Col>\r\n              <Col>\r\n<p>Champion</p>\r\n                <img\r\n                  alt=\"...\"\r\n                  className=\"img-raised\"\r\n                  src={require(\"assets/img/winicon1.png\")}\r\n                ></img><br/><br/><br/><br/>\r\n<p >In The Red</p>\r\n                <img\r\n                  alt=\"...\"\r\n                  className=\"img-raised\"\r\n                  src={require(\"assets/img/death1.png\")}\r\n                ></img><br/><br/><br/><br/>\r\n              </Col>\r\n            </Row>\r\n  </div>\r\n\r\n  )\r\n}\r\n\r\nrequestProfile(){\r\n  if(this.state.total_steps !== 0){\r\n    this.wait(1000);\r\n  }\r\n  console.log(\"Requesting profile...\");\r\n  var newRequest = {\r\n    type: \"pull profile\",\r\n    user_name: global.userName\r\n  }\r\n  this.requestToServer(JSON.stringify(newRequest));\r\n}\r\n\r\nrendersignup(){\r\n  return(\r\n    <Col className=\"text-center ml-auto mr-auto\" lg=\"6\" md=\"8\">\r\n    <InputGroup>\r\n      <InputGroupAddon addonType=\"prepend\">\r\n        <InputGroupText>\r\n          <i className=\"now-ui-icons users_circle-08\"></i>\r\n        </InputGroupText>\r\n      </InputGroupAddon>\r\n      <Input\r\n        placeholder=\"User Name...\"\r\n        type=\"text\"\r\n        value={this.state.login_username}\r\n        onChange={(event) => this.loginChange('login_username', event)}\r\n      ></Input>\r\n    </InputGroup>\r\n    <div className=\"send-button\">\r\n    {this.redirectToProfile()}\r\n      <Button\r\n        block\r\n        className=\"btn-round\"\r\n        color=\"info\"\r\n        size=\"lg\"\r\n        onClick={this.handleLogin.bind(this)}\r\n      >\r\n      Sign up now\r\n      </Button>\r\n      <div className=\"pull-middle\">\r\n        <h6>\r\n          <a\r\n            className=\"link\"\r\n            href=\"/login-page\"\r\n          >\r\n            Login to existing Account\r\n          </a>\r\n        </h6>\r\n      </div>\r\n    </div>\r\n    </Col>\r\n  )\r\n}\r\n\r\nredirectToProfile(){\r\n  if (this.state.redirect) {\r\n    return(\r\n         <Redirect to={{\r\n               pathname: '/profile-page',\r\n           }} />)\r\n  }\r\n}\r\n\r\nhandleLogin(){\r\n  this.setState({\r\n  redirect: true\r\n})\r\n}\r\n\r\nloginChange(type,event){\r\n  this.setState({[type]: event.target.value});\r\n  global.userName= event.target.value;\r\n}\r\n\r\nhandleChange(type,event) {\r\n   this.setState({[type]: event.target.value});\r\n}\r\n\r\nrenderLogin(){\r\n  return(\r\n    <form >\r\n    <InputGroup\r\n      >\r\n      <InputGroupAddon addonType=\"prepend\">\r\n        <InputGroupText>\r\n          <i className=\"now-ui-icons users_circle-08\"></i>\r\n        </InputGroupText>\r\n      </InputGroupAddon>\r\n      <Input\r\n        placeholder=\"User Name...\"\r\n        type=\"text\"\r\n        value={this.state.login_username}\r\n        onChange={(event) => this.loginChange('login_username', event)}\r\n      ></Input>\r\n    </InputGroup>\r\n    <InputGroup>\r\n      <InputGroupAddon addonType=\"prepend\">\r\n        <InputGroupText>\r\n          <i className=\"now-ui-icons text_caps-small\"></i>\r\n        </InputGroupText>\r\n      </InputGroupAddon>\r\n      <Input\r\n        placeholder=\"Password...\"\r\n        type=\"password\"\r\n      ></Input>\r\n    </InputGroup>\r\n    {this.redirectToProfile()}\r\n    <Button\r\n      block\r\n      className=\"btn-round\"\r\n      color=\"info\"\r\n      onClick={this.handleLogin.bind(this)}\r\n      size=\"lg\"\r\n      >    Login\r\n    </Button>\r\n    </form>\r\n  );\r\n}\r\n\r\nrequestChallenges(){\r\n  console.log(\"Requesting challenges...\")\r\n  var newRequest1 = {\r\n    type: \"pull all challenges\"\r\n }\r\n  this.requestToServer(JSON.stringify(newRequest1))\r\n}\r\n\r\n  renderGetChallenges(){\r\n   if(this.state.mqttConnected === true){\r\n    this.requestChallenges()\r\n  }\r\n  if(this.state.challenge_array.length === 0)\r\n  {\r\n    return <div> <h2> Loading challenges... </h2> </div>\r\n  }\r\n  else{\r\n   return(\r\n     <React.Fragment key={listitem.challenge_id}>\r\n        <div align=\"middle\" class=\"tg-wrap\"><table id=\"tg-VvxLO\">\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>Description</th>\r\n          <th>Step Goal</th>\r\n          <th>End Date</th>\r\n          <th>Reward</th>\r\n          <th></th>\r\n        </tr>\r\n          {this.state.challenge_array.map(listitem => (\r\n            <tr>\r\n              <td>{listitem.challenge_name}</td>\r\n              <td>{listitem.description}</td>\r\n              <td>{listitem.step_goal}</td>\r\n              <td>{listitem.end_time}</td>\r\n              <td>{listitem.reward}</td>\r\n              <td><Button className=\"submit-button\" value={listitem.challenge_id} onClick={(event) => this.pushSelectedChallenge(event,listitem.challenge_id).bind(this)} variant=\"outlined\" size=\"large\" color=\"primary\">Accept Challenge</Button></td>\r\n            </tr>\r\n          ))}\r\n        </table></div>\r\n      </React.Fragment>\r\n  );\r\n}\r\n}\r\n\r\npushSelectedChallenge(event,id){\r\n  var selectedChallenge = {\r\n    type: \"push select challenge\",\r\n    user_name: global.userName,\r\n    challenge_id: id\r\n  }\r\n  this.requestToServer(JSON.stringify(selectedChallenge));\r\n  alert(\"You successfully joined this challenge\");\r\n}\r\n\r\nrenderSetChallenge(){\r\nreturn(\r\n    <div>\r\n    <form align=\"left\" onSubmit={this.validateChallengeInput.bind(this)} >\r\n    <label className =\"form-label\">Challenge Name:  </label>\r\n    <input type=\"text\"  value={this.state.challenge_name} onChange={(event) => this.handleChange('challenge_name', event)} /><p/>\r\n    <label className =\"form-label\">Description:  </label>\r\n    <input type=\"text\" className='challenge-textfield' value={this.state.challenge_description} onChange={(event) => this.handleChange('challenge_description', event)} /><p/>\r\n    <label className =\"form-label\">End Date: </label>\r\n    <input type=\"date\"  value={this.state.challenge_end_date} onChange={(event) => this.handleChange('challenge_end_date', event)} /><p/>\r\n    <label className =\"form-label\">Step Goal: </label>\r\n    <input type=\"number\"  value={this.state.challenge_step_goal} onChange={(event) => this.handleChange('challenge_step_goal', event)}/><p/>\r\n    <label className =\"form-label\">User Reward: </label>\r\n    <input type=\"number\"  value={this.state.challenge_reward} onChange={(event) => this.handleChange('challenge_reward', event)}/><p/>\r\n\r\n    <button className=\"submit-button\">Create Challenge</button>\r\n    </form>\r\n    </div>\r\n  )\r\n}\r\n\r\n  validateChallengeInput(event){\r\n    event.preventDefault();\r\n    if(this.state.challenge_name === '' || this.state.challenge_description === '' || this.state.challenge_reward === '' || this.state.challenge_step_goal === ''){\r\n      alert(\"Please complete all fields\");\r\n    }\r\n    else if(this.state.challenge_reward >=0 && this.state.challenge_step_goal >=0){\r\n      this.pushNewChallenge(event);\r\n    }\r\n    else{\r\n      alert(\"Please enter positive numbers\");\r\n    }\r\n  }\r\n\r\n  pushNewChallenge(event){\r\n    console.log(JSON.stringify(this.state.challenge_name));\r\n    console.log(\"Pushing New Challenge\");\r\n    var today = new Date(),\r\n    date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate()+'T'+today.getHours()+':'+today.getMinutes()+':'+today.getSeconds()+'.'+today.getMilliseconds()+'Z';\r\n  \tvar newChallenge = {\r\n      type: \"push new challenge\",\r\n      challenge_id: \"C\" + this.makeid(6),\r\n      challenge_name: this.state.challenge_name,\r\n      description: this.state.challenge_description,\r\n      end_time: this.state.challenge_end_date,\r\n      step_goal: this.state.challenge_step_goal,\r\n      reward: this.state.challenge_reward,\r\n      current_time: date\r\n    }\r\n\r\n  \tthis.requestToServer(JSON.stringify(newChallenge));\r\n    alert(\"You successfully created a new challenge\");\r\n  }\r\n\r\n\r\n\r\n  // called when the client connects\r\n  onConnect() {\r\n    // Once a connection has been made report.\r\n    console.log(\"Connected\");\r\n    this.setState({\r\n    mqttConnected: true\r\n  });\r\n\r\n    // this.state.mqttConnected = true;\r\n  }\r\n  // called when the client connects\r\n  requestToServer(payload) {\r\n    // Once a connection has been made, make a subscription and send a message.\r\n    console.log(\"Request to server\");\r\n    this.client.subscribe(\"doordie_web\");\r\n    var message = new Paho.Message(payload);\r\n    message.destinationName = \"doordie_web\";\r\n    this.client.send(message);\r\n  }\r\n  // called to generate the IDs\r\n  makeid(length) {\r\n     var result           = '';\r\n     var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n     var charactersLength = characters.length;\r\n     for ( var i = 0; i < length; i++ ) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n     }\r\n     return result;\r\n  }\r\n\r\n  // called when the client loses its connection\r\n  onConnectionLost(responseObject) {\r\n    if (responseObject.errorCode !== 0) {\r\n      console.log(\"Mqtt.onConnectionLost:\"+responseObject.errorMessage);\r\n    }\r\n  }\r\n\r\n  // called when a message arrives\r\n  onMessageArrived(message) {\r\n    console.log(\"Mgtt.onMessageArrived:\"+message.payloadString);\r\n    var json_message = JSON.parse(message.payloadString);\r\n\r\n    if(json_message.type === 'push all challenges'){\r\n      console.log(\"attempt to get array\");\r\n      this.setState({challenge_array: json_message.challenge})\r\n    }\r\n\r\n    if(json_message.type === 'push profile' && json_message.user_name === global.userName){\r\n      console.log(\"HELLLO\");\r\n      this.setState({\r\n        total_steps: json_message.total_steps,\r\n        remaining_sec: json_message.remaining_sec,\r\n        ranking: Math.max(1, Math.round(8378 -json_message.total_steps +this.state.dummy_counter/3,0)), //dummy formula: so that it looks like your ranking changes when the step count goes up\r\n        dummy_counter: this.state.dummy_counter + 1\r\n      })\r\n    }\r\n}\r\n\r\n  //wait function called after sever request, to avoid spaming the server\r\n  wait(ms){\r\n   var start = new Date().getTime();\r\n   var end = start;\r\n   while(end < start + ms) {\r\n     end = new Date().getTime();\r\n  }\r\n  }\r\n\r\n}\r\nexport default Mqtt;\r\n"]},"metadata":{},"sourceType":"module"}