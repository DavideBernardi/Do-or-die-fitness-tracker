{"ast":null,"code":"// Create a client instance, we create a random id so the broker will allow multiple sessions\nimport jQuery from 'jquery';\nimport Paho from 'paho-mqtt';\n\nfunction MQTT_client() {\n  var client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + makeid(3)); // set callback handlers\n\n  client.onConnectionLost = onConnectionLost;\n  client.onMessageArrived = onMessageArrived; // connect the client\n\n  client.connect({\n    onSuccess: onConnect\n  });\n\n  function getByValue(variable) {\n    var x = document.getElementById(variable);\n    return x;\n  }\n\n  function placeOrder() {\n    console.log(\"Hello\");\n    var text = \"\";\n    var newOrder = {\n      order_id: \"O\" + makeid(7),\n      // order_status: getByValue(\"Name\"),\n      user: {\n        user_name: \"Oli\" //x.elements[3].value,\n        // delivery_address: x.elements[4].value,\n        // delivery_coordinates: x.elements[5].value\n\n      }\n    }; // document.getElementById(\"order\").innerHTML = JSON.stringify(newOrder);\n    // document.getElementById(\"status\").innerHTML = newOrder.order_status;\n\n    onSubmit(JSON.stringify(newOrder));\n  } // called when the client connects\n\n\n  function onSubmit(payload) {\n    // Once a connection has been made, make a subscription and send a message.\n    console.log(\"onSubmit\");\n    client.subscribe(\"food_orders\");\n    var message = new Paho.Message(payload);\n    message.destinationName = \"food_orders\";\n    client.send(message);\n  } // called when the client connects\n\n\n  function onConnect() {\n    // Once a connection has been made report.\n    console.log(\"Connected\");\n  } // called when the client loses its connection\n\n\n  function onConnectionLost(responseObject) {\n    if (responseObject.errorCode !== 0) {\n      console.log(\"onConnectionLost:\" + responseObject.errorMessage);\n    }\n  } // called when a message arrives\n\n\n  function onMessageArrived(message) {\n    console.log(\"onMessageArrived:\" + message.payloadString);\n  } // called to generate the IDs\n\n\n  function makeid(length) {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  }\n}\n\nexport default MQTT_client;","map":{"version":3,"sources":["C:/Users/chrib/Dropbox/Studium/5. Bristol/8.Software_Eng/Github/now-ui-kit-react-master/src/views/examples/MQTTclient.js"],"names":["jQuery","Paho","MQTT_client","client","Client","makeid","onConnectionLost","onMessageArrived","connect","onSuccess","onConnect","getByValue","variable","x","document","getElementById","placeOrder","console","log","text","newOrder","order_id","user","user_name","onSubmit","JSON","stringify","payload","subscribe","message","Message","destinationName","send","responseObject","errorCode","errorMessage","payloadString","length","result","characters","charactersLength","i","charAt","Math","floor","random"],"mappings":"AAAA;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEA,SAASC,WAAT,GAAsB;AACtB,MAAIC,MAAM,GAAG,IAAIF,IAAI,CAACG,MAAT,CAAgB,0BAAhB,EAA4C,IAA5C,EAAkD,aAAaC,MAAM,CAAC,CAAD,CAArE,CAAb,CADsB,CAGtB;;AACAF,EAAAA,MAAM,CAACG,gBAAP,GAA0BA,gBAA1B;AACAH,EAAAA,MAAM,CAACI,gBAAP,GAA0BA,gBAA1B,CALsB,CAOtB;;AACAJ,EAAAA,MAAM,CAACK,OAAP,CAAe;AAACC,IAAAA,SAAS,EAACC;AAAX,GAAf;;AAEA,WAASC,UAAT,CAAoBC,QAApB,EAA6B;AAC3B,QAAIC,CAAC,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,QAAxB,CAAR;AACA,WAAOC,CAAP;AACD;;AAED,WAASG,UAAT,GAAsB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,QAAIC,IAAI,GAAG,EAAX;AACD,QAAIC,QAAQ,GAAG;AACdC,MAAAA,QAAQ,EAAE,MAAMhB,MAAM,CAAC,CAAD,CADR;AAEd;AACEiB,MAAAA,IAAI,EAAE;AACJC,QAAAA,SAAS,EAAE,KADP,CAEL;AACF;AACA;;AAJO;AAHM,KAAf,CAHqB,CAcpB;AACD;;AACAC,IAAAA,QAAQ,CAACC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAD,CAAR;AACA,GAhCqB,CAkCtB;;;AACA,WAASI,QAAT,CAAkBG,OAAlB,EAA2B;AACzB;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAf,IAAAA,MAAM,CAACyB,SAAP,CAAiB,aAAjB;AACA,QAAIC,OAAO,GAAG,IAAI5B,IAAI,CAAC6B,OAAT,CAAiBH,OAAjB,CAAd;AACAE,IAAAA,OAAO,CAACE,eAAR,GAA0B,aAA1B;AACA5B,IAAAA,MAAM,CAAC6B,IAAP,CAAYH,OAAZ;AACD,GA1CqB,CA8CtB;;;AACA,WAASnB,SAAT,GAAqB;AACnB;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACD,GAlDqB,CAoDtB;;;AACA,WAASZ,gBAAT,CAA0B2B,cAA1B,EAA0C;AACxC,QAAIA,cAAc,CAACC,SAAf,KAA6B,CAAjC,EAAoC;AAClCjB,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAoBe,cAAc,CAACE,YAA/C;AACD;AACF,GAzDqB,CA2DtB;;;AACA,WAAS5B,gBAAT,CAA0BsB,OAA1B,EAAmC;AACjCZ,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAoBW,OAAO,CAACO,aAAxC;AACD,GA9DqB,CAgEtB;;;AACA,WAAS/B,MAAT,CAAgBgC,MAAhB,EAAwB;AACrB,QAAIC,MAAM,GAAa,EAAvB;AACA,QAAIC,UAAU,GAAS,gEAAvB;AACA,QAAIC,gBAAgB,GAAGD,UAAU,CAACF,MAAlC;;AACA,SAAM,IAAII,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGJ,MAArB,EAA6BI,CAAC,EAA9B,EAAmC;AAChCH,MAAAA,MAAM,IAAIC,UAAU,CAACG,MAAX,CAAkBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBL,gBAA3B,CAAlB,CAAV;AACF;;AACD,WAAOF,MAAP;AACF;AAEA;;AACD,eAAepC,WAAf","sourcesContent":["// Create a client instance, we create a random id so the broker will allow multiple sessions\nimport jQuery from 'jquery';\nimport Paho from 'paho-mqtt';\n\nfunction MQTT_client(){\nvar client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + makeid(3) );\n\n// set callback handlers\nclient.onConnectionLost = onConnectionLost;\nclient.onMessageArrived = onMessageArrived;\n\n// connect the client\nclient.connect({onSuccess:onConnect});\n\nfunction getByValue(variable){\n  var x = document.getElementById(variable);\n  return x;\n}\n\nfunction placeOrder() {\n  console.log(\"Hello\");\n  var text = \"\";\n\tvar newOrder = {\n  order_id: \"O\" + makeid(7),\n  // order_status: getByValue(\"Name\"),\n    user: {\n\t\t    user_name: \"Oli\"\n     //x.elements[3].value,\n  \t// delivery_address: x.elements[4].value,\n  \t// delivery_coordinates: x.elements[5].value\n\t },\n  }\n\n  // document.getElementById(\"order\").innerHTML = JSON.stringify(newOrder);\n\t// document.getElementById(\"status\").innerHTML = newOrder.order_status;\n\tonSubmit(JSON.stringify(newOrder));\n}\n\n// called when the client connects\nfunction onSubmit(payload) {\n  // Once a connection has been made, make a subscription and send a message.\n  console.log(\"onSubmit\");\n  client.subscribe(\"food_orders\");\n  var message = new Paho.Message(payload);\n  message.destinationName = \"food_orders\";\n  client.send(message);\n}\n\n\n\n// called when the client connects\nfunction onConnect() {\n  // Once a connection has been made report.\n  console.log(\"Connected\");\n}\n\n// called when the client loses its connection\nfunction onConnectionLost(responseObject) {\n  if (responseObject.errorCode !== 0) {\n    console.log(\"onConnectionLost:\"+responseObject.errorMessage);\n  }\n}\n\n// called when a message arrives\nfunction onMessageArrived(message) {\n  console.log(\"onMessageArrived:\"+message.payloadString);\n}\n\n// called to generate the IDs\nfunction makeid(length) {\n   var result           = '';\n   var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n   var charactersLength = characters.length;\n   for ( var i = 0; i < length; i++ ) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n   }\n   return result;\n}\n\n}\nexport default MQTT_client;\n"]},"metadata":{},"sourceType":"module"}