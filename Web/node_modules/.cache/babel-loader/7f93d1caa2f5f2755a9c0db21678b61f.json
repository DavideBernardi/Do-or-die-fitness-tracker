{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chrib\\\\Dropbox\\\\Studium\\\\5. Bristol\\\\8.Software_Eng\\\\Github\\\\now-ui-kit-react-master\\\\src\\\\views\\\\examples\\\\MQTTclient.js\";\n// Create a client instance, we create a random id so the broker will allow multiple sessions\nimport React from \"react\";\nimport jQuery from 'jquery';\nimport Paho from 'paho-mqtt';\nimport { Button, Card, CardHeader, CardBody, CardFooter, Form, Input, InputGroupAddon, InputGroupText, InputGroup, Container, Col } from \"reactstrap\";\n\nclass Mqtt extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      challenge_name: '',\n      challenge_description: '',\n      challenge_step_goal: '',\n      challenge_end_date: '20-03-31',\n      challenge_reward: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.pushNewChallenge = this.pushNewChallenge.bind(this);\n    this.client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + this.makeid(3));\n    this.client.connect({\n      onSuccess: this.onConnect\n    });\n    this.client.onConnectionLost = this.onConnectionLost;\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  render() {\n    if (this.props.type === \"set-challenge\") {\n      return this.renderSetChallenge();\n    }\n\n    if (this.props.type === \"login\") {\n      return this.renderLogin();\n    }\n  }\n\n  renderSetChallenge() {\n    return React.createElement(\"form\", {\n      align: \"left\",\n      onSubmit: this.validateChallengeInput.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Challenge Name:  \"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.challenge_name,\n      onChange: event => this.handleChange('challenge_name', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Description:  \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"challenge-textfield\",\n      value: this.state.challenge_description,\n      onChange: event => this.handleChange('challenge_description', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"End Date: \"), React.createElement(\"input\", {\n      type: \"date\",\n      value: this.state.challenge_end_date,\n      onChange: event => this.handleChange('challenge_end_date', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Step Goal: \"), React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.challenge_step_goal,\n      onChange: event => this.handleChange('challenge_step_goal', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"User Reward: \"), React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.challenge_reward,\n      onChange: event => this.handleChange('challenge_reward', event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"submit-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Create Challenge\"));\n  }\n\n  renderLogin() {\n    const [firstFocus, setFirstFocus] = React.useState(false);\n    const [lastFocus, setLastFocus] = React.useState(false);\n    return React.createElement(Form, {\n      action: \"\",\n      className: \"form\",\n      method: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logo-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"...\",\n      src: require(\"assets/img/now-logo.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }))), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"no-border input-lg\" + (firstFocus ? \" input-group-focus\" : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(InputGroupAddon, {\n      addonType: \"prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(InputGroupText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"now-ui-icons users_circle-08\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))), React.createElement(Input, {\n      placeholder: \"User Name...\",\n      type: \"text\",\n      onFocus: () => setFirstFocus(true),\n      onBlur: () => setFirstFocus(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), React.createElement(InputGroup, {\n      className: \"no-border input-lg\" + (lastFocus ? \" input-group-focus\" : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(InputGroupAddon, {\n      addonType: \"prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(InputGroupText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"now-ui-icons text_caps-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }))), React.createElement(Input, {\n      placeholder: \"Password...\",\n      type: \"password\",\n      onFocus: () => setLastFocus(true),\n      onBlur: () => setLastFocus(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }))), React.createElement(CardFooter, {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Button, {\n      block: true,\n      className: \"btn-round\",\n      color: \"info\",\n      href: \"/profile-page\",\n      size: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      className: \"pull-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"link\",\n      href: \"/landing-page#id1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Create new account\"))), React.createElement(\"div\", {\n      className: \"pull-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"link\",\n      href: \"https://www.mentalhealth.org.uk/your-mental-health/getting-help\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Need Help?\")))));\n  }\n\n  handleChange(type, event) {\n    this.setState({\n      [type]: event.target.value\n    });\n  } // called when the client connects\n\n\n  onConnect() {\n    // Once a connection has been made report.\n    console.log(\"Connected\");\n  }\n\n  validateChallengeInput(event) {\n    event.preventDefault();\n    var flag = 0;\n\n    if (this.state.challenge_name === '' || this.state.challenge_description === '' || this.state.challenge_reward === '' || this.state.challenge_step_goal === '') {\n      alert(\"Please complete all fields\");\n    } else if (this.state.challenge_reward >= 0 && this.state.challenge_step_goal >= 0) {\n      this.pushNewChallenge(event);\n    } else {\n      alert(\"Please enter positive numbers\");\n    }\n  }\n\n  pushNewChallenge(event) {\n    console.log(JSON.stringify(this.state.challenge_name)); // var x = Mqtt.getByValue(\"challenge-name\");\n\n    console.log(\"Pushing New Challenge\");\n    var today = new Date(),\n        date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + 'T' + today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds() + '.' + today.getMilliseconds() + 'Z';\n    var newOrder = {\n      type: \"push new challenge\",\n      challenge_id: \"C\" + this.makeid(6),\n      challenge_name: this.state.challenge_name,\n      description: this.state.challenge_description,\n      end_time: this.state.challenge_end_date,\n      step_goal: this.state.challenge_step_goal,\n      reward: this.state.challenge_reward,\n      current_time: date\n    }; //x.elements[3].value,\n    // delivery_address: x.elements[4].value,\n    // delivery_coordinates: x.elements[5].value\n    // document.getElementById(\"order\").innerHTML = JSON.stringify(newOrder);\n    // document.getElementById(\"status\").innerHTML = newOrder.order_status;\n\n    this.onSubmit(JSON.stringify(newOrder));\n  } // called when the client connects\n\n\n  onSubmit(payload) {\n    // Once a connection has been made, make a subscription and send a message.\n    console.log(\"onSubmit\");\n    this.client.subscribe(\"doordie_web\");\n    var message = new Paho.Message(payload);\n    message.destinationName = \"doordie_web\";\n    this.client.send(message);\n  } // called to generate the IDs\n\n\n  makeid(length) {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  } // called when the client loses its connection\n\n\n  onConnectionLost(responseObject) {\n    if (responseObject.errorCode !== 0) {\n      console.log(\"Mqtt.onConnectionLost:\" + responseObject.errorMessage);\n    }\n  } // called when a message arrives\n\n\n  onMessageArrived(message) {\n    console.log(\"Mgtt.onMessageArrived:\" + message.payloadString);\n  }\n\n}\n\nexport default Mqtt;","map":{"version":3,"sources":["C:/Users/chrib/Dropbox/Studium/5. Bristol/8.Software_Eng/Github/now-ui-kit-react-master/src/views/examples/MQTTclient.js"],"names":["React","jQuery","Paho","Button","Card","CardHeader","CardBody","CardFooter","Form","Input","InputGroupAddon","InputGroupText","InputGroup","Container","Col","Mqtt","Component","constructor","props","state","challenge_name","challenge_description","challenge_step_goal","challenge_end_date","challenge_reward","handleChange","bind","pushNewChallenge","client","Client","makeid","connect","onSuccess","onConnect","onConnectionLost","onMessageArrived","render","type","renderSetChallenge","renderLogin","validateChallengeInput","event","firstFocus","setFirstFocus","useState","lastFocus","setLastFocus","require","setState","target","value","console","log","preventDefault","flag","alert","JSON","stringify","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","newOrder","challenge_id","description","end_time","step_goal","reward","current_time","onSubmit","payload","subscribe","message","Message","destinationName","send","length","result","characters","charactersLength","i","charAt","Math","floor","random","responseObject","errorCode","errorMessage","payloadString"],"mappings":"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","sourcesContent":["// Create a client instance, we create a random id so the broker will allow multiple sessions\nimport React from \"react\";\nimport jQuery from 'jquery';\nimport Paho from 'paho-mqtt';\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Form,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Col\n} from \"reactstrap\";\n\nclass Mqtt extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n        challenge_name: '',\n        challenge_description: '',\n        challenge_step_goal: '',\n        challenge_end_date: '20-03-31',\n        challenge_reward: '',\n\n\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.pushNewChallenge = this.pushNewChallenge.bind(this);\n\n    this.client = new Paho.Client(\"broker.mqttdashboard.com\", 8000, \"clientId\" + this.makeid(3) );\n    this.client.connect({onSuccess: this.onConnect});\n    this.client.onConnectionLost = this.onConnectionLost;\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  render(){\n      if(this.props.type === \"set-challenge\"){\n        return(this.renderSetChallenge())\n      }\n      if(this.props.type === \"login\"){\n        return(this.renderLogin())\n      }\n  }\n\n  renderSetChallenge(){\n    return(\n      <form align=\"left\" onSubmit={this.validateChallengeInput.bind(this)} >\n      <label className =\"form-label\">Challenge Name:  </label>\n      <input type=\"text\"  value={this.state.challenge_name} onChange={(event) => this.handleChange('challenge_name', event)} /><p/>\n      <label className =\"form-label\">Description:  </label>\n      <input type=\"text\" className='challenge-textfield' value={this.state.challenge_description} onChange={(event) => this.handleChange('challenge_description', event)} /><p/>\n      <label className =\"form-label\">End Date: </label>\n      <input type=\"date\"  value={this.state.challenge_end_date} onChange={(event) => this.handleChange('challenge_end_date', event)} /><p/>\n      <label className =\"form-label\">Step Goal: </label>\n      <input type=\"number\"  value={this.state.challenge_step_goal} onChange={(event) => this.handleChange('challenge_step_goal', event)}/><p/>\n      <label className =\"form-label\">User Reward: </label>\n      <input type=\"number\"  value={this.state.challenge_reward} onChange={(event) => this.handleChange('challenge_reward', event)}/><p/>\n\n      <button className=\"submit-button\">Create Challenge</button>\n      </form>\n    )\n  }\n\n\nrenderLogin(){\n  const [firstFocus, setFirstFocus] = React.useState(false);\n  const [lastFocus, setLastFocus] = React.useState(false);\n  return(\n  <Form action=\"\" className=\"form\" method=\"\">\n    <CardHeader className=\"text-center\">\n      <div className=\"logo-container\">\n        <img\n          alt=\"...\"\n          src={require(\"assets/img/now-logo.png\")}\n        ></img>\n      </div>\n    </CardHeader>\n    <CardBody>\n      <InputGroup\n        className={\n          \"no-border input-lg\" +\n          (firstFocus ? \" input-group-focus\" : \"\")\n        }\n      >\n        <InputGroupAddon addonType=\"prepend\">\n          <InputGroupText>\n            <i className=\"now-ui-icons users_circle-08\"></i>\n          </InputGroupText>\n        </InputGroupAddon>\n        <Input\n          placeholder=\"User Name...\"\n          type=\"text\"\n          onFocus={() => setFirstFocus(true)}\n          onBlur={() => setFirstFocus(false)}\n        ></Input>\n      </InputGroup>\n      <InputGroup\n        className={\n          \"no-border input-lg\" +\n          (lastFocus ? \" input-group-focus\" : \"\")\n        }\n      >\n        <InputGroupAddon addonType=\"prepend\">\n          <InputGroupText>\n            <i className=\"now-ui-icons text_caps-small\"></i>\n          </InputGroupText>\n        </InputGroupAddon>\n        <Input\n          placeholder=\"Password...\"\n          type=\"password\"\n          onFocus={() => setLastFocus(true)}\n          onBlur={() => setLastFocus(false)}\n        ></Input>\n      </InputGroup>\n    </CardBody>\n    <CardFooter className=\"text-center\">\n      <Button\n        block\n        className=\"btn-round\"\n        color=\"info\"\n        href=\"/profile-page\"\n\n        size=\"lg\"\n      >\n        Login\n      </Button>\n      <div className=\"pull-left\">\n        <h6>\n          <a\n            className=\"link\"\n            href=\"/landing-page#id1\"\n          >\n            Create new account\n          </a>\n        </h6>\n      </div>\n      <div className=\"pull-right\">\n        <h6>\n          <a\n            className=\"link\"\n            href=\"https://www.mentalhealth.org.uk/your-mental-health/getting-help\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Need Help?\n          </a>\n        </h6>\n      </div>\n    </CardFooter>\n  </Form>\n);\n}\n\n  handleChange(type,event) {\n     this.setState({[type]: event.target.value});\n  }\n\n  // called when the client connects\n  onConnect() {\n    // Once a connection has been made report.\n    console.log(\"Connected\");\n  }\n\n  validateChallengeInput(event){\n    event.preventDefault();\n    var flag = 0;\n    if(this.state.challenge_name === '' || this.state.challenge_description === '' || this.state.challenge_reward === '' || this.state.challenge_step_goal === ''){\n      alert(\"Please complete all fields\");\n    }\n    else if(this.state.challenge_reward >=0 && this.state.challenge_step_goal >=0){\n      this.pushNewChallenge(event);\n    }\n    else{\n      alert(\"Please enter positive numbers\");\n\n    }\n  }\n\n\n  pushNewChallenge(event){\n    console.log(JSON.stringify(this.state.challenge_name));\n    // var x = Mqtt.getByValue(\"challenge-name\");\n    console.log(\"Pushing New Challenge\");\n    var today = new Date(),\n    date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate()+'T'+today.getHours()+':'+today.getMinutes()+':'+today.getSeconds()+'.'+today.getMilliseconds()+'Z';\n  \tvar newOrder = {\n      type: \"push new challenge\",\n      challenge_id: \"C\" + this.makeid(6),\n      challenge_name: this.state.challenge_name,\n      description: this.state.challenge_description,\n      end_time: this.state.challenge_end_date,\n      step_goal: this.state.challenge_step_goal,\n      reward: this.state.challenge_reward,\n      current_time: date\n    }\n       //x.elements[3].value,\n    \t// delivery_address: x.elements[4].value,\n    \t// delivery_coordinates: x.elements[5].value\n    // document.getElementById(\"order\").innerHTML = JSON.stringify(newOrder);\n  \t// document.getElementById(\"status\").innerHTML = newOrder.order_status;\n  \tthis.onSubmit(JSON.stringify(newOrder));\n  }\n\n  // called when the client connects\n  onSubmit(payload) {\n    // Once a connection has been made, make a subscription and send a message.\n    console.log(\"onSubmit\");\n    this.client.subscribe(\"doordie_web\");\n    var message = new Paho.Message(payload);\n    message.destinationName = \"doordie_web\";\n    this.client.send(message);\n  }\n\n  // called to generate the IDs\n  makeid(length) {\n     var result           = '';\n     var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n     var charactersLength = characters.length;\n     for ( var i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n     }\n     return result;\n  }\n\n  // called when the client loses its connection\n  onConnectionLost(responseObject) {\n    if (responseObject.errorCode !== 0) {\n      console.log(\"Mqtt.onConnectionLost:\"+responseObject.errorMessage);\n    }\n  }\n\n  // called when a message arrives\n  onMessageArrived(message) {\n    console.log(\"Mgtt.onMessageArrived:\"+message.payloadString);\n  }\n\n}\nexport default Mqtt;\n"]},"metadata":{},"sourceType":"module"}